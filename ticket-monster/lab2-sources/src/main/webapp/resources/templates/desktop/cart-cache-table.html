<h3 class="page-header light-font special-title">Cache Entries</h3>
<div class="row-fluid">
    <div class='span12'>
        <table class='table table-bordered' style="background: #fffffa;">
            <thead>
            <tr>
                <th>ID / Cache Key</th>
               	<th>Performance ID</th>
               	<th>Performance Date</th>
               	<th>Number of reserved seats</th>
               	<th>Cache entry node</th>
            </tr>
            </thead>
            <tbody id='cartCacheList'>
            <% _.each(model.models, function (cartCacheEntry) { %>
            <tr>
            	<td><%=cartCacheEntry.attributes.cacheKey%></td>
                <td><%=cartCacheEntry.attributes.performanceId%></td>
                <td><%=new Date(cartCacheEntry.attributes.performanceDate).toPrettyString()%></td>
                <!-- Might need some additional 'for each' loops to loop over ticket requests and seat allocations. -->
                <%
                	var numberOfReservedSeats = 2;
                 %>
             	<td><%=cartCacheEntry.attributes.numberOfReservedSeats%></td>
             	<td><%=cartCacheEntry.attributes.addresses%></td>
             	
            </tr>
             
            <% }); %>
            
            </tbody>
        </table>
    </div>
</div>

<% if (paginator.totalPageCount > 0) { %>
<div class="row-fluid">
    <div class="pagination pagination-right">
        <ul>
            <% if (paginator.currentPage>1) { %>
            <li>
                <a data-tm-role="page" data-tm-page="<%=paginator.currentPage-1%>">&#171;Previous</a>
            </li>
            <% } %>
            <% if ((paginator.currentPage - 2)>1) { %>
            <li><a data-tm-role="page" data-tm-page="1">1</a></li>
            <% } %>
            <% if ((paginator.currentPage - 2)>2) { %>
            <li class="disabled"><a class="disabled">...</a></li>
            <% } %>
            <% for (i = Math.max(1, paginator.currentPage-2);
                    i <= Math.min(paginator.currentPage+2, paginator.totalPageCount);
                    i++) { %>
            <li class='<%=(paginator.currentPage==i)?"active":""%>'><a data-tm-role="page" data-tm-page="<%=i%>"><%=i%></a></li>
            <% } %>
            <% if ((paginator.currentPage + 3)< paginator.totalPageCount) { %>
            <li class="disabled"><a>...</a></li>
            <% } %>
            <% if ((paginator.currentPage + 2)< paginator.totalPageCount) { %>
            <li><a data-tm-role="page" data-tm-page="<%=paginator.totalPageCount%>"><%=paginator.totalPageCount%></a></li>
            <% } %>
            <% if (paginator.currentPage< paginator.totalPageCount) { %>
            <li>
                <a data-tm-role="page" data-tm-page="<%=paginator.currentPage+1%>">Next&#187;</a>
            </li>
            <% } %>
        </ul>
    </div>
<% } %>
</div> 